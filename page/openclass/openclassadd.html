<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>公开课添加</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../lib/layui-v2.5.5/css/layui.css" media="all">
    <link rel="stylesheet" href="../../css/public.css" media="all">
</head>
<body>
<div class="layuimini-container">
    <div class="layuimini-main">
        <form class="layui-form layuimini-form" action="">
            <!--日期-->
            <div class="layui-form-item">
                <label class="layui-form-label required">公开课日期</label>
                <div class="layui-input-block">
                    <input id="day" type="text" name="day" lay-verify="required" placeholder="请选择公开课日期" value="" class="layui-input" readonly>
                </div>
            </div>
            <!--技术专题-->
            <div class="layui-form-item">
                <label class="layui-form-label  required" >技术专题</label>
                <div class="layui-input-block">
                    <input id="specialName" type="text" name="specialName" lay-verify="required" placeholder="请输入技术专题" class="layui-input" onblur="checkspecialName()">
                </div>
            </div>
            <!--主讲人-->
            <div class="layui-form-item">
                <label class="layui-form-label required" >主讲人</label>
                <div class="layui-input-block ">
                    <input id="speaker" type="text" name="speaker" lay-verify="required" placeholder="请输入主讲人姓名" class="layui-input" onblur="checkSpeaker()">
                </div>
            </div>
            <!--组织人-->
            <div class="layui-form-item">
                <label class="layui-form-label required" >组织人</label>
                <div class="layui-input-block ">
                    <input id="organizer" type="text" name="organizer" lay-verify="required"  placeholder="请输入组织人姓名" class="layui-input" onblur="checkOrganizer()">
                </div>
            </div>
            <!--地点-->
            <div class="layui-form-item">
                <label class="layui-form-label required" >地点</label>
                <div class="layui-input-block ">
                    <input id="site" type="text" name="site" lay-verify="required"  placeholder="请输入地点" class="layui-input" onblur="checkSite()">
                </div>
            </div>
            <!--群体说明-->
            <div class="layui-form-item">
                <label class="layui-form-label required" >群体说明</label>
                <div class="layui-input-block ">
                    <input id="group" type="text" name="group" lay-verify="required"  placeholder="请输入听课群体" class="layui-input" onblur="checkGroup()">
                </div>
            </div>
            <!--方式-->
            <div class="layui-form-item">
                <label class="layui-form-label required">方式</label>
                <div class="layui-input-block" lay-filter="mode" id="mode">
                    <input type="radio" name="mode" value="线下" title="线下" checked="">
                    <input type="radio" name="mode" value="直播" title="直播">
                    <input type="radio" name="mode" value="录播" title="录播" >
                </div>
            </div>
            <!--创新学分值-->
            <div class="layui-form-item">
                <label class="layui-form-label required" >创新学分值</label>
                <div class="layui-input-block ">
                    <input id="credit" type="text" name="credit" lay-verify="required"  placeholder="请输入创新学分值" class="layui-input" onblur="checkCredit()">
                </div>
            </div>
            <!--人数-->
            <div class="layui-form-item">
                <label class="layui-form-label">大致人数</label>
                <div class="layui-input-block">
                    <select id="number" name="number" lay-filter="number" >
                        <option value="" >--请选择--</option>
                        <option value="1">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- 50 </option>
                        <option value="2">51&nbsp;&nbsp;&nbsp;&nbsp;- 300</option>
                        <option value="3">301&nbsp;&nbsp;- 1000</option>
                        <option value="4">1001&nbsp;- 5000</option>
                        <option value="5">5000+</option>
                    </select>
                </div>
            </div>
            <!--具体参加人数-->
            <div class="layui-form-item">
                <label class="layui-form-label required" >具体人数</label>
                <div class="layui-input-block ">
                    <input id="number1" type="text" name="number1" placeholder="请输入参加人数" class="layui-input">
                </div>
            </div>
            <!--备注-->
            <div class="layui-form-item layui-form-text">
                <label class="layui-form-label ">备注：</label>
                <div class="layui-input-block">
                    <textarea id="remark" placeholder="请输入内容" class="layui-textarea" name="desc"></textarea>
                </div>
            </div>
            <!--添加公开课-->
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit="" lay-filter="demo1">添加公开课</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script src="../../lib/layui-v2.5.5/layui.js" charset="utf-8"></script>
<script type="text/javascript" >
    /*日期，技术专题验证*/
    function checkspecialName() {
        var specialName = document.getElementById("specialName").value;
        var pattern1 = /^[a-zA-Z\u4e00-\u9fa5]{1,50}$/;
        if(specialName == null || specialName == '0' || specialName.trim().length == 0){
            layer.msg('请说明技术专题',{
                icon:5,
                time:1000
            });
        }else if(!pattern1.test(specialName)) {
            layer.msg('技术专题格式不正确',{
                icon:5,
                time:1000
            });
        }
    }
    /*主讲人*/
    function checkSpeaker() {
        var speaker = document.getElementById("speaker").value;
        var pattern = /^[\u4e00-\u9fa5]{2,4}$/;
        if(speaker == null || speaker == '' || speaker.trim().length == 0){
            layer.msg('请说明主讲人',{
                icon:5,
                time:1000
            });
        }else if(!pattern.test(speaker)) {
            layer.msg('主讲人姓名格式不正确',{
                icon:5,
                time:1000
            });
        }
    }
    /*组织人*/
    function checkOrganizer() {
        var organizer = document.getElementById("organizer").value;
        if(organizer == null || organizer == '' || organizer.trim().length == 0||organizer == '0'){
            layer.msg('请说明主讲人',{
                icon:5,
                time:1000
            });
        }
    }
    /*地点*/
    function checkSite() {
        var site = document.getElementById("site").value;
        if(site == null || site == '' || site.trim().length == 0){
            layer.msg('请说明地点',{
                icon:5,
                time:1000
            });
        }
    }
    /*群体说明*/
    function checkGroup() {
        var group = document.getElementById("group").value;
        if(group == null || group == '' || group.trim().length == 0||group == '0'){
            layer.msg('请说明参与群体',{
                icon:5,
                time:1000
            });
        }
    }
    /*创新学分值*/
    function checkCredit() {
        var credit = document.getElementById("credit").value;
        var pattern = /^[0-9].[1-9]$/;
        if(credit == null || credit == '' || credit.trim().length == 0){
            layer.msg('创新学分不能为零',{
                icon:5,
                time:1000
            });
        }else if(!pattern.test(credit)) {
            layer.msg('创行学分范围出错',{
                icon:5,
                time:1000
            });
        }
    }
</script>
<script>
    layui.use(['form', 'layedit','laydate'], function () {
        var form = layui.form
            , layer = layui.layer
            , layedit = layui.layedit
            ,laydate = layui.laydate
            ,$ = layui.jquery;

        //创建一个编辑器
        var editIndex = layedit.build('LAY_demo_editor');
        //日期监听
        var ins22 = laydate.render({
            elem: '#day'
            ,min: ''
            ,showBottom: false
        });
        // 1. 验证人数，失去焦点时触发
        $("#number1").blur(function () {
            var number1 = $("#number1").val();
            if(number1 == null || number1 == '' || number1.trim().length == 0){
                layer.msg('人数不能为空',{
                    icon:5,
                    time:1000
                });
            }
        });
        // 进行确认操作
        form.on('submit(saveBtn)', function (data) {
            var data = data.field;
            var day1 = data.day1;/*加入日期*/
            var post = data.post;/*担任职务*/
            var credit = data.credit;/*学分*/
            var pattern1 = /^[a-zA-Z\u4e00-\u9fa5]{1,50}$/;
            var pattern2 = /^[\u4e00-\u9fa5]{2,4}$/;
            if(specialName == null || specialName == '0' || specialName.trim().length == 0){
                layer.msg('请说明技术专题',{
                    icon:5,
                    time:1000
                });
            }else if(!pattern1.test(specialName)) {
                layer.msg('技术专题格式不正确',{
                    icon:5,
                    time:1000
                });
            }else   if(speaker == null || speaker == '' || speaker.trim().length == 0){
                layer.msg('请说明主讲人',{
                    icon:5,
                    time:1000
                });
            }else if(!pattern2.test(speaker)) {
                layer.msg('主讲人姓名格式不正确',{
                    icon:5,
                    time:1000
                });
            }else if(credit == null || credit == '' || credit.trim().length == 0){
                layer.msg('创新学分不能为零',{
                    icon:5,
                    time:1000
                });
            }else if(!pattern3.test(credit)) {
                layer.msg('创行学分范围出错',{
                    icon:5,
                    time:1000
                });
                return false;
            }
            /*提交信息*/
            var index = layer.alert(JSON.stringify(data), {
                title: '最终的提交信息'
            }, function () {
                layer.close(index);
                var iframeIndex = parent.layer.getFrameIndex(window.name);
                parent.layer.close(iframeIndex);
            });
            return false;
        });
    });
</script>

</body>
</html>